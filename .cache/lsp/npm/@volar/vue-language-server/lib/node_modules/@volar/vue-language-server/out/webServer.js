Object.defineProperty(exports, "__esModule", { value: true });
const request_light_1 = require("request-light");
const ts = require("typescript/lib/tsserverlibrary"); // bundle typescript lib in web
const vscode = require("vscode-languageserver/browser");
const commonServer_1 = require("./commonServer");
const http_1 = require("./schemaRequestHandlers/http");
const webFileSystemHost_1 = require("./utils/webFileSystemHost");
const messageReader = new vscode.BrowserMessageReader(self);
const messageWriter = new vscode.BrowserMessageWriter(self);
const connection = vscode.createConnection(messageReader, messageWriter);
(0, commonServer_1.createLanguageServer)(connection, {
    loadTypescript(options) {
        return ts; // not support load by user config in web
    },
    loadTypescriptLocalized(options) {
        // TODO
    },
    schemaRequestHandlers: {
        http: http_1.default,
        https: http_1.default,
    },
    onDidChangeConfiguration(settings) {
        (0, request_light_1.configure)(settings.http && settings.http.proxy, settings.http && settings.http.proxyStrictSSL);
    },
    fileSystemProvide: undefined,
    createFileSystemHost: webFileSystemHost_1.createWebFileSystemHost,
});
//# sourceMappingURL=webServer.js.map